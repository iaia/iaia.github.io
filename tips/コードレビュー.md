コードレビュー

やる意味
- 動作するか、バグがないか、セキュリティ的に問題がないか確認してもらう
- 長期的に見たときに
    - これが読みやすいか
    - 他の変更に耐えうるか
- 書く回数より読まれる回数の方が圧倒的に多い
    - つまり読みやすさが重要になる
    - 書いた人間は読むときにバイアスが生じていて読みやすいと感じてしまう
    - バイアスが無い他の人間に読んでもらうことで読みやすいか判断してもらえる

自分が普段気をつけていること、気にしなければならないこと
- 優先して消化するべき
    - 他の人の仕事を止めない
    - 最大1日待たせる程度は許容可
    - それ以上待たせる場合はパスするべき
- 目的・仕様の確認
    - 何よりもまず何のため、どうなっていなければならないコードなのかを理解
    - 将来のコンテキストを持たない誰かが読んでも目的・仕様が分かる状態になっているか?
    - もし目的・仕様がコード/PR/issue単独で分からない場合は弾くべき
- バグと思しきコードがないか確認
- セキュリティ的に問題がないか
    - ユーザのパスワードが秘匿されていないとか
- 複雑すぎないか?
- 目的とコードが合っているかどうか
- 自分ならどう書くか、それと比べてどうか
- 正しい実装をやっているという前提に立つ
    - 仲間を信頼する

例外系
- issueにしていない簡単な修正やデバッグ機能の追加、リファクタリングやspecの追加みたいな場合
    - この場合も目的をPRに必ず書く
    - コードからは目的は読み取れない

なぜ気をつけなければならないか
- 仕事が滞るのを避ける
    - 自分がハンコを押すだけで他の人が仕事を進められる
    - 仕事を進められないというのは
- コンテキストスイッチ切り替えは大変ということを理解する
    - Aの実装 => Aのコードレビュー待ちでBの実装 => Bのコードレビュー待ちでCの実装 => Aのコードレビューで差し替えし…
- 仕様を知りたい
    - コードが複雑/issueに何も書いてないなどだと仕様が分かりづらい
    - コードを時間を掛けて読み解くしかない => コードが正
    - 仮に仕様が書かれておらず、更にバグっているような挙動の場合に、コードが正のはずだがコードがバグっているという矛盾したような状況に陥る
    - 何が正なのか実装時に議論したはずなのに、将来再度判断しなければならない
- バグを直したいのに躊躇する
    - なぜこういう書き方をしたのか、が読み取れないと修正に躊躇する
    - 難しいエッジケースに対応した結果かもしれない
- リファクタリングしたい
    - 正が分かっていないとリファクタリング結果が良いのかわからない
