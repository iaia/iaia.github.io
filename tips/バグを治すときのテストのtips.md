バグを治すときのテストのtips

- 手順
    - 現状の挙動を元にしたテストを書く
        - => 通ることを確認する
    - 理想の状態を元にしてテストを書き直す
        - => 落ちることを確認する
    - テストが通るように実装(SUT)を修正する
        - => 通ることを確認する
- なんでこうやるの?
    - 現状の確認をしたいのでそれがテスト出来るようにしておきたい
    - いきなり実装変えて、更にテストを書き直すと、実は意味のないテストになってしまったってことがよくある
    - 想定していない状況だったので、テストの準備もそれを想定していないので通ってしまうケースがある
- 例えば?
    - 非公開にしている日記が出ているというバグがあった
    - 日記のテストを非公開は出ていないよね? をテスト書く => 通る
        - そもそも非公開の日記がテスト時にレコード作られてないのでテストは通っちゃう
    - まず現状の挙動を元にテスト書くようにすると
    - 非公開の日記がテスト時にレコードを作らないとテストが通らない
    - 非公開の日記が出ているよね? をテスト書く
    - テストが通ることを確認
    - 非公開の日記が出ていないよね? をテスト書く
    - テストが通らないことを確認する
    - 非公開の日記は出ないように実装を修正する
    - テストが通ることを確認する
